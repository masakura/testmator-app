var Testmator=function(a,b){"use strict";!function(){var c={level_:0,callbacks:[],start:function(){this.level_++},end:function(){this.level_<=0||(this.level_--,this.level_<=0&&this.executeAll_())},register:function(a){this.callbacks.push(a),this.level_<=0&&this.executeAll_()},executeAll_:function(){var a=this.callbacks;this.callbacks=[],setTimeout(function(){a.forEach(function(a){a()})},11)}},d=["show","shown","hide","hidden"],e=["bs.modal","bs.collapse","bs.dropdown","bs.alert"],f=b.chain(d).map(function(a){return b.map(e,function(b){return a+"."+b})}).flatten().join(" ").value();a(document).on(f,function(a){"hide"===a.type||"show"===a.type?c.start():("hidden"===a.type||"shown"===a.type)&&c.end()}),a.fn.promiseTransition=function(){var d=a.Deferred(),e=b.toArray(arguments);return c.register(function(){d.resolve.apply(d,e)}),d.promise()}}();var c=function(a,c){var d,e=this;d=a&&b.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},b.extend(d,e,c);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&b.extend(d.prototype,a),d},d=function(a){var c=Testmator.$.Deferred().resolve(a).promise(),d=function(c){var e=function(){var a=b.toArray(arguments),e=b.first(a);return a[0]=function(a){var b=e.call(a,a);return b&&b.getPromise&&b.getPromise()||b},d(c.then.apply(c,a))},f=function(){return d(c.done.apply(c,arguments))};return{name:"AUTOMATOR",getPage:function(){return a},getPromise:function(){return c},action:function(a){return e(function(b){return a.call(b,b)})},scope:function(b){return e(function(c){return b.call(c,c)||a})},test:function(b){return e(function(c){return b.call(c,c),a})},done:function(){return f.apply(c,arguments)}}};return d(c)},e=function(c,d){var e=["getPage","getPromise","done"],f=b.chain(e).map(function(b){return[b,a.proxy(c[b],c)]}).object().value(),g=b.chain(c).functions().difference(e).map(function(a){return[a,function(){return d(c[a].apply(c,arguments))}]}).object().value();return b.extend({},f,g)},f=function(c){var d=e(c,f),g=d.action,h=d.scope,i=function(c){return function(){var e=b.toArray(arguments),f=e[0];return e[0]=function(b){var c=f(b);return c.then?c:c.getPromise?c.getPromise().then(function(b){return a(document).promiseTransition(b)}):a(document).promiseTransition(c)},c.apply(d,e)}};return b.extend(d,{name:"WAIT",action:i(g),scope:i(h)})},g=function(a){var c=e(a,g),d=c.action;return b.extend(c,{name:"NAMED",action:function(){var c=b.toArray(arguments),e=c.shift();return b.isString(e)?d.call(a,function(a){return a[e].apply(a,c)}):d.apply(this,arguments)}}),c},h=function(a){var c=a.getPage(),d=b.chain(c).functions().map(function(a){return[a,function(){var c=b.toArray(arguments);return this.action(function(b){return b[a].apply(b,c)})}]}).object().value();return b.extend(d,e(a,h),{name:"FUNCTION"})},i=b.clone(b);return i.mixin({appendWaitAction:f,appendNamedAction:g,appendFunctionAction:h}),{$:a,PageObject:function(){var d=function(c){var d=c&&c.el||c;this.el=b.isFunction(d)&&d()||d instanceof a&&d[0]||d instanceof HTMLElement||document,this.$el=Testmator.$(this.el),this.parent=c&&c.parent,b.isFunction(this.initialize)&&this.initialize.apply(this,arguments)};return b.extend(d.prototype,{$:function(){return this.$el.find.apply(this.$el,arguments)},click:function(a){return this.$(a).trigger(d.clickEventName),this},switchParent:function(){return this.parent}}),b.extend(d,{clickEventName:"click"}),d.extend=c,d}(),wrap:function(a){return i.chain(d(a)).appendWaitAction().appendNamedAction().appendFunctionAction().value()}}}(jQuery||$,_);!function(){"use strict";var a=Testmator.PageObject.extend({clickCloseDemoModal:function(){return this.click("#close-demo-modal"),this.switchParent()},isShown:function(){return this.$el.hasClass("in")}}),b=Testmator.PageObject.extend({names:{1:"collapseOne",2:"collapseTwo",3:"collapseThree"},clickAt:function(a){return this.click('[data-toggle="collapse"][href="#'+this.names[a]+'"]'),this},isShownAt:function(a){return this.$("#"+this.names[a]).hasClass("in")}}),c=Testmator.PageObject.extend({clickClose:function(){return this.click("#close-alert"),this.switchParent()}}),d=Testmator.PageObject.extend({switchModal:function(){return new a({el:this.$("#myModal"),parent:this})},switchAccordion:function(){return new b({el:this.$("#accordion"),parent:this})},switchAlert:function(){return new c({el:this.$("#alert"),parent:this})},clickLaunchDemoModal:function(){return this.click("#launch-demo-modal"),this.switchModal()},clickThrowError:function(){return this.click("#throw-error"),this.switchAlert()}}),e=new d;$(document).on("click","#test1",function(){Testmator.wrap(e).test(function(a){console.log(!a.switchModal().isShown())}).action("clickLaunchDemoModal").scope(function(a){return Testmator.wrap(a).test(function(){console.log(a.isShown())}).clickCloseDemoModal()}).test(function(a){console.log(!a.switchModal().isShown())}).action(function(a){return a.switchAccordion()}).scope(function(a){return Testmator.wrap(a).test(function(){console.log(a.isShownAt(1)),console.log(!a.isShownAt(2)),console.log(!a.isShownAt(3))}).clickAt(1).test(function(){console.log(!a.isShownAt(1)),console.log(!a.isShownAt(2)),console.log(!a.isShownAt(3))}).clickAt(2).test(function(){console.log(!a.isShownAt(1)),console.log(a.isShownAt(2)),console.log(!a.isShownAt(3))}).clickAt(1).test(function(){console.log(a.isShownAt(1)),console.log(!a.isShownAt(2)),console.log(!a.isShownAt(3))}).switchParent()}).action("clickThrowError").scope(function(a){return Testmator.wrap(a).clickClose()}).done(function(){console.log("DONE")})}),$(document).on("click","#throw-error",function(){var a=_.template($("#alert-template").html());$("#page").append(a())})}();